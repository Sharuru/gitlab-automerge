<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GAM - 维护面板</title>
    <meta charset="UTF-8"/>
    <link th:href="@{/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css}" rel="stylesheet"/>
    <script th:src="@{/webjars/jquery/3.2.0/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js}"></script>
    <script th:src="@{/webjars/jquery/3.2.0/jquery.min.js}"></script>
</head>
<body>

<!-- content -->
<div class="container" style="margin-left: 10rem; margin-top: 2rem;">
    <div class="page-header">
        <h1>GAM - 维护面板 </h1>
        <p>在这里，你可以针对 STEP 1 以及 STEP 2 的机能进行手动发布管理。</p>
    </div>

    <div class="alert alert-info" role="alert">
        <div>
            <b>2012-12-28：关于发布周期与其他事宜</b>
            <p>
                STEP 1 范围内的程序会在中国时间每天下午四点进行一次全量发布。<br/>
                STEP 1 使用的数据库为前方提供的 LJD，SCHEMA 为：jastdb_v0-9-0-sh1。<br/>
                STEP 2 范围内的程序请测试人员根据 Redmine Wiki 中的 ITA 发布流程进行操作，发布的程序版本默认每 15 分钟从开发分支合并一次。<br/>
                STEP 2 使用的数据库为前方提供的 LJD，SCHEMA 为：jastdb_v0-9-0-sh2。<br/>
            </p>
        </div>
    </div>

    <div class="page-header">
        <h3>STEP 1 操作区</h3>
        <p>你可以在这里针对 STEP 1 范围内的某一单独程序进行计划外的发布。</p>
    </div>

    <div>
        <p>单击“STEP 1 通知发布”按钮后，触发计划外发布流程，随后操作类似 ITA 阶段。</p>
        <p>按下按钮后，请根据系统返回的 PIPELINE ID 前往对应页面等待基础部件编译完毕后，按下“播放键”进行单独程序的发布。</p>
        <button type="button" class="btn btn-primary">STEP 1 通知发布 _(:3 」∠ )_</button>
    </div>

    <div class="page-header">
        <h3>STEP 2 操作区</h3>
        <p>你可以在这里通知系统立即合并开发分支中的代码进入 ITA 分支中。</p>
    </div>

    <div>
        <p>单击“STEP 2 通知合并”按钮后，触发计划外发布流程，随后操作类似 ITA 阶段。</p>
        <p>按下按钮后，请根据系统返回的指示，依照 Redmine Wiki 中的流程，前往对应页面等待基础部件编译完毕后，按下“播放键”进行单独程序的发布。</p>
        <button type="button" class="btn btn-primary">STEP 2 通知合并 ｡:.ﾟヽ(*´∀`)ﾉﾟ.:｡</button>
    </div>

<!--    <h3>手动更新操作</h3>
    <p>如果您需要立刻更新 ITAsdfsdf 分支，请按下“执行更新”按钮。</p>-->

<!--    <button id="update-btn" type="button">执行更新</button>

    <div style="padding-top: 2rem;padding-left: 5rem;">
        <h4>响应</h4>
        <div id="update-response"></div>
    </div>-->

</div>


<script>
    $(function () {
        $("#update-btn").click(function () {
            $('#update-btn').attr('disabled', 'disabled');
            $.ajax({
                type: 'POST',
                url: '/update'
            })
                .done(function (data) {
                    if (data.status === true) {
                        $('#update-response').append(data.message + "<br/>");
                    } else {
                        $('#update-response').append(data.message + "<br/>");
                    }
                    setTimeout(function () {
                        $('#update-btn').removeAttr('disabled');
                    }, 1500)
                    ;
                });
        })
    });
</script>


<!--<div class="container" style="position: absolute; bottom: 0;">
    JAT v0.0.1-SNAPSHOT
</div>-->
</body>
</html>